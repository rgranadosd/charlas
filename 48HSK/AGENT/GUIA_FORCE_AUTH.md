#!/bin/bash
# Script para demostrar el uso correcto de --force-auth

echo "=== DEMOSTRACI√ìN DE --force-auth ==="
echo ""
echo "El par√°metro --force-auth funciona de la siguiente manera:"
echo ""
echo "1. üìã Inicia el agente con: python3 agent_gpt4.py --force-auth"
echo "2. üîÑ El sistema limpia tokens y permisos anteriores"
echo "3. üí¨ Haces una consulta que requiere autenticaci√≥n (ej: 'dame la lista de productos')"
echo "4. üåê Se abre el navegador autom√°ticamente para autenticarte en WSO2"
echo "5. üîë Despu√©s de autenticarte, se cargan tus permisos"
echo "6. ‚úÖ Ya puedes usar todas las funciones seg√∫n tus permisos"
echo ""
echo "EJEMPLO DE FLUJO COMPLETO:"
echo ""
echo "Terminal:"
echo "$ python3 agent_gpt4.py --force-auth"
echo "=== AGENTE SHOPIFY IA (v2.5 FINAL) ==="
echo "[Forzando nueva autenticaci√≥n...]"
echo "[OK] Listo. Escribe 'salir' para terminar."
echo "T√∫ > dame la lista de productos"
echo "üîÑ Forzando nueva autenticaci√≥n completa..."
echo "[Se abre el navegador para OAuth]"
echo "üîë Permisos cargados: ['Update Descriptions', 'Update Prices', 'View Products']"
echo "- ID: 123456 - Shopify Gift Card - $25.00"
echo "- ID: 789012 - Premium Product - $99.99"
echo ""
echo "NOTAS IMPORTANTES:"
echo "‚Ä¢ El --force-auth NO te autentica inmediatamente al iniciar"
echo "‚Ä¢ La autenticaci√≥n se dispara cuando haces tu PRIMERA consulta"
echo "‚Ä¢ Si no se abre el navegador, copia y pega la URL que aparece"
echo "‚Ä¢ Aseg√∫rate de que WSO2 Identity Server est√© corriendo en puerto 9443"
echo ""
echo "SOLUCI√ìN AL PROBLEMA:"
echo "El mensaje 'No tienes permisos para ver productos' indica que:"
echo "1. ‚ùå No se complet√≥ la autenticaci√≥n OAuth"
echo "2. ‚ùå O el usuario no tiene el rol 'ProductManager' asignado"
echo ""
echo "Para solucionarlo:"
echo "1. ‚úÖ Usa --force-auth"
echo "2. ‚úÖ Haz una consulta (ej: 'lista productos')"
echo "3. ‚úÖ Completa la autenticaci√≥n en el navegador"
echo "4. ‚úÖ Verifica que tu usuario tenga el rol ProductManager"
echo ""